{"version":3,"sources":["webpack:///src/components/uploadImg.vue","webpack:///./src/components/uploadImg.vue?a64f","webpack:///./src/components/uploadImg.vue"],"names":["uploadImg","props","urls","type","Array","default","data","cropperVisible","option","img","info","outputSize","outputType","canScale","autoCrop","autoCropWidth","autoCropHeight","fixedBox","fixed","fixedNumber","full","canMoveBox","original","centerBox","infoTrue","loading","methods","upload","e","_this","this","files","target","formData","FormData","i","length","append","Object","dy","then","res","imgs","map","v","push","url","concat","$emit","finish","_this2","$refs","cropper","getCropBlob","console","log","size","fileinfo","components_uploadImg","render","_vm","_h","$createElement","_c","_self","staticClass","_l","key","attrs","src","fit","contain","_e","_v","multiple","on","change","title","visible","width","append-to-body","update:visible","$event","staticStyle","text-align","ref","canMove","realTime","slot","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/8.bfb64df356e11a45b663.js","sourcesContent":["<template>\r\n    <div class=\"upload-img\">\r\n        <div class=\"img-list flex-row\" v-if=\"urls.length>0\">\r\n            <img v-for=\"(v,i) in urls\" :key=\"i\" :src=\"v\" :fit=\"contain\" class=\"img\">\r\n        </div>\r\n        <input type=\"file\" multiple @change=\"upload\">\r\n        <!-- vueCropper 剪裁图片实现-->\r\n        <el-dialog title=\"图片剪裁\" :visible.sync=\"cropperVisible\" width=\"1040px\" append-to-body>\r\n            <div class=\"cropper-content\">\r\n                <div class=\"cropper\" style=\"text-align:center\">\r\n                    <vueCropper\r\n                        ref=\"cropper\"\r\n                        :img=\"option.img\"\r\n                        :outputSize=\"option.size\"\r\n                        :outputType=\"option.outputType\"\r\n                        :info=\"true\"\r\n                        :full=\"option.full\"\r\n                        :canMove=\"option.canMove\"\r\n                        :canMoveBox=\"option.canMoveBox\"\r\n                        :original=\"option.original\"\r\n                        :autoCrop=\"option.autoCrop\"\r\n                        :fixed=\"option.fixed\"\r\n                        :fixedNumber=\"option.fixedNumber\"\r\n                        :centerBox=\"option.centerBox\"\r\n                        :infoTrue=\"option.infoTrue\"\r\n                        :fixedBox=\"option.fixedBox\"\r\n                        @realTime=\"realTime\"\r\n                    ></vueCropper>\r\n                </div>\r\n            </div>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button size=\"small\" @click=\"cropperVisible = false\">取 消</el-button>\r\n                <el-button size=\"small\" type=\"primary\" @click=\"finish\" :loading=\"loading\">确认</el-button>\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { multiUpload } from \"../api/dy\";\r\nexport default {\r\n  props: {\r\n    urls: {\r\n      type: Array,\r\n      default: []\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      cropperVisible: false,\r\n      // 裁剪组件的基础配置option\r\n      option: {\r\n        img: \"\", // 裁剪图片的地址\r\n        info: true, // 裁剪框的大小信息\r\n        outputSize: 1, // 裁剪生成图片的质量\r\n        outputType: \"jpeg\", // 裁剪生成图片的格式\r\n        canScale: true, // 图片是否允许滚轮缩放\r\n        autoCrop: true, // 是否默认生成截图框\r\n        autoCropWidth: 800, // 默认生成截图框宽度\r\n        autoCropHeight: 800, // 默认生成截图框高度\r\n        fixedBox: false, // 固定截图框大小 不允许改变\r\n        fixed: true, // 是否开启截图框宽高固定比例\r\n        fixedNumber: [1, 1], // 截图框的宽高比例\r\n        full: false, // 是否输出原图比例的截图\r\n        canMoveBox: true, // 截图框能否拖动\r\n        original: true, // 上传图片按照原始比例渲染\r\n        centerBox: false, // 截图框是否被限制在图片里面\r\n        infoTrue: true // true 为展示真实输出图片宽高 false 展示看到的截图框宽高\r\n      },\r\n      loading:false\r\n    };\r\n  },\r\n  methods: {\r\n    upload(e) {\r\n      var files = e.target.files;\r\n      var formData = new FormData();\r\n      for (var i = 0; i < files.length; i++) {\r\n        formData.append(\"image[]\", files[i]);\r\n      }\r\n      multiUpload(formData).then(res => {\r\n        if (res.data.length > 0) {\r\n          var imgs = [];\r\n          res.data.map(v => {\r\n            imgs.push(v.url);\r\n          });\r\n          this.urls = this.urls.concat(imgs);\r\n          this.$emit(\"transferUrls\", this.urls);\r\n        }\r\n      });\r\n    //     console.log(files)\r\n    //   this.fileinfo = files[0];\r\n    //   let _URL = window.URL || window.webkitURL;\r\n    //   let img = new Image();\r\n    //   img.src = _URL.createObjectURL(this.fileinfo);\r\n    //   this.$nextTick(() => {\r\n    //     this.option.img = img.src;\r\n    //     this.cropperVisible = true;\r\n    //     this.loading = false;\r\n    //   });\r\n    },\r\n    // 点击裁剪，这一步是可以拿到处理后的地址\r\n    finish() {\r\n      this.$refs.cropper.getCropBlob(data => {\r\n          console.log(data.size,this.fileinfo.size)\r\n        // var fileName = \"goods\" + this.fileinfo.lastModified;\r\n        // this.loading = true;\r\n        // data.uid = this.fileinfo.uid;\r\n        // console.log(data);\r\n        // const imgSize = data.size / 1024;\r\n        // if (imgSize > 500) {\r\n        //   this.$message.error(\"上传图片大小不能超过 500kb!\");\r\n        //   this.loading = false;\r\n        //   return false;\r\n        // }\r\n        // let formData = new FormData();\r\n        // formData.append(\"file\", data);\r\n        // qiuniuUpToken(formData).then(res => {\r\n        //   this.loading = false;\r\n        //   this.cropperVisible = false;\r\n        //   this.$emit(\"transferUrl\", res);\r\n        // });\r\n      });\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.img-list {\r\n  justify-content: flex-start;\r\n  .img {\r\n    width: 100px;\r\n    height: 100px;\r\n    margin-right: 10px;\r\n  }\r\n}\r\n// 截图\r\n.cropper-content {\r\n  .cropper {\r\n    width: 1000px;\r\n    height: 480px;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/uploadImg.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"upload-img\"},[(_vm.urls.length>0)?_c('div',{staticClass:\"img-list flex-row\"},_vm._l((_vm.urls),function(v,i){return _c('img',{key:i,staticClass:\"img\",attrs:{\"src\":v,\"fit\":_vm.contain}})}),0):_vm._e(),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"file\",\"multiple\":\"\"},on:{\"change\":_vm.upload}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"图片剪裁\",\"visible\":_vm.cropperVisible,\"width\":\"1040px\",\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.cropperVisible=$event}}},[_c('div',{staticClass:\"cropper-content\"},[_c('div',{staticClass:\"cropper\",staticStyle:{\"text-align\":\"center\"}},[_c('vueCropper',{ref:\"cropper\",attrs:{\"img\":_vm.option.img,\"outputSize\":_vm.option.size,\"outputType\":_vm.option.outputType,\"info\":true,\"full\":_vm.option.full,\"canMove\":_vm.option.canMove,\"canMoveBox\":_vm.option.canMoveBox,\"original\":_vm.option.original,\"autoCrop\":_vm.option.autoCrop,\"fixed\":_vm.option.fixed,\"fixedNumber\":_vm.option.fixedNumber,\"centerBox\":_vm.option.centerBox,\"infoTrue\":_vm.option.infoTrue,\"fixedBox\":_vm.option.fixedBox},on:{\"realTime\":_vm.realTime}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.cropperVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.finish}},[_vm._v(\"确认\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-59757fc4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/uploadImg.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-59757fc4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./uploadImg.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./uploadImg.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./uploadImg.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-59757fc4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./uploadImg.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-59757fc4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/uploadImg.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}